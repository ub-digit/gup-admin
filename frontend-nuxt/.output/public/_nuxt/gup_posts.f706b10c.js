import{r as g,o as u,b as d,e as a,f as i,h as n,t,p as G,a as P,u as c,j as I,I as w,w as l,F as k,C as S,J as C,z as _}from"./entry.fb5008d9.js";import{u as v}from"./Spinner.2bb35980.js";const T={key:0,class:"row"},V={class:"col text-center"},D={class:"mb-2 text-danger"},ss={__name:"ErrorLoadingPost",props:["error"],setup(s){return(e,r)=>{const f=g("font-awesome-icon");return s.error?(u(),d("div",T,[a("div",V,[a("h2",D,[i(f,{icon:"fa-solid fa-circle-exclamation"}),n(" "+t(s.error.statusCode),1)]),a("p",null,t(s.error.message),1)])])):G("",!0)}}},F={class:"list-inline"},N={class:"list-inline-item"},M={class:"list-inline-item"},E={class:"list-inline-item"},L={__name:"PostMeta",props:["post"],setup(s){const e=s,{t:r}=P();return(f,m)=>{const o=g("font-awesome-icon");return u(),d("div",null,[a("ul",F,[a("li",N,[i(o,{class:"text-danger",icon:"fa-solid fa-flag"}),n(" "+t(c(r)("views.publications.form.needs_attention")),1)]),a("li",M,[i(o,{class:"text-info",icon:"fa-solid fa-file-arrow-down"}),n(" "+t(c(r)("views.publications.post.import_from_scopus")),1)]),a("li",E,[i(o,{class:"text-warning",icon:"fa-solid fa-award"}),n(" "+t(e.post.date)+" "+t(c(r)("views.publications.post.by"))+" "+t(e.post.creator),1)])])])}}},j={},q={class:"row mb-2"},z={class:"col-4 fw-bold"},A={class:"col-8"};function J(s,e){return u(),d("div",q,[a("div",z,[w(s.$slots,"label")]),a("div",A,[w(s.$slots,"content")])])}const O=I(j,[["render",J]]),R={class:"fields mb-4"},W={class:"list-unstyled mb-0"},X=["href"],H={key:0},K=["href"],Q={key:1,class:"badge bg-danger"},ts={__name:"PostDisplay",props:["post"],setup(s){const{t:e}=P();return(r,f)=>{const m=L,o=O;return u(),d("div",null,[i(m,{class:"mb-4",post:s.post},null,8,["post"]),a("div",R,[i(o,null,{label:l(()=>[n(t(c(e)("views.publications.post.fields.pubtype")),1)]),content:l(()=>[n(t(s.post.pubtype),1)]),_:1}),i(o,null,{label:l(()=>[n(t(c(e)("views.publications.post.fields.published_in")),1)]),content:l(()=>[n(t(s.post.published_in),1)]),_:1}),i(o,null,{label:l(()=>[n(t(c(e)("views.publications.post.fields.pubyear")),1)]),content:l(()=>[n(t(s.post.date),1)]),_:1}),i(o,null,{label:l(()=>[n(t(c(e)("views.publications.post.fields.author")),1)]),content:l(()=>[a("ul",W,[(u(!0),d(k,null,S(s.post.authors,h=>(u(),d("li",{key:h.id},t(h.name),1))),128))])]),_:1}),i(o,null,{label:l(()=>[n(t(c(e)("views.publications.post.fields.doi")),1)]),content:l(()=>[a("a",{href:s.post.doi,target:"_blank"},t(s.post.doi),9,X)]),_:1}),i(o,null,{label:l(()=>[n(t(c(e)("views.publications.post.fields.scopus")),1)]),content:l(()=>[s.post.scopus_id?(u(),d("span",H,[a("a",{href:s.post.scopus_id},t(s.post.scopus_id),9,K)])):(u(),d("span",Q,t(c(e)("views.publications.post.fields.scopus_missing")),1))]),_:1})])])}}},es=C("gupPostsStore",()=>{const s=_([]),e=_([]),r=_({}),f=_(null),m=_(null),o=_(null),h=_(null);async function $(y){try{o.value=!0;const{data:p,error:b}=await v("/api/posts_gup_by_id",{params:{id:y}},"$w0APOedx6d");e.value=p.value}catch{console.log("Something went wrong: fetchGupPostsById")}finally{o.value=!1}}async function B(y,p){try{m.value=!0;const{data:b,error:U}=await v("/api/posts_gup_by_title",{params:{id:y,title:p}},"$oMuPDkDbSk");s.value=b.value}catch{console.log("Something went wrong: fetchGupPostsByTitle")}finally{m.value=!1}}async function x(y){try{h.value=!0;const{data:p,error:b}=await v(`/api/post_gup/${y}`,"$q6Rl7pWoVX");b.value?f.value=b.value.data:r.value=p.value}catch{console.log("Something went wrong: fetchGupPostById")}finally{h.value=!1}}return{gupPostsByTitle:s,fetchGupPostsByTitle:B,pendingGupPostsByTitle:m,gupPostsById:e,fetchGupPostsById:$,pendingGupPostsById:o,gupPostById:r,errorGupPostById:f,fetchGupPostById:x,pendingGupPostById:h}});export{ss as _,ts as a,es as u};

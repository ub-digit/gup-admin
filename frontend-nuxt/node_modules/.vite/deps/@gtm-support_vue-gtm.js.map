{
  "version": 3,
  "sources": ["../../@gtm-support/core/lib/index.js", "../../@gtm-support/vue-gtm/dist/index.js"],
  "sourcesContent": ["const GTM_ID_PATTERN = /^GTM-[0-9A-Z]+$/;\nfunction assertIsGtmId(id) {\n  if (typeof id !== \"string\" || !GTM_ID_PATTERN.test(id)) {\n    const suggestion = String(id).toUpperCase().replace(/.*-|[^0-9A-Z]/g, \"\");\n    const suggestionText = suggestion.length === 0 ? \"\" : ` Did you mean 'GTM-${suggestion}'?`;\n    throw new Error(\n      `'${id}' is not a valid GTM-ID (${GTM_ID_PATTERN}).${suggestionText}`\n    );\n  }\n}\nfunction loadScript(id, config) {\n  var _a;\n  const doc = document;\n  const script = doc.createElement(\"script\");\n  const scriptLoadListener = (event) => {\n    var _a2;\n    (_a2 = config.onReady) == null ? void 0 : _a2.call(config, { id, script });\n    script.removeEventListener(\"load\", scriptLoadListener);\n  };\n  script.addEventListener(\"load\", scriptLoadListener);\n  window.dataLayer = window.dataLayer ?? [];\n  (_a = window.dataLayer) == null ? void 0 : _a.push({\n    event: \"gtm.js\",\n    \"gtm.start\": new Date().getTime()\n  });\n  if (!id) {\n    return script;\n  }\n  script.async = !config.defer;\n  script.defer = Boolean(config.defer || config.compatibility);\n  if (config.nonce) {\n    script.nonce = config.nonce;\n  }\n  const queryString = new URLSearchParams({\n    id,\n    ...config.queryParams ?? {}\n  });\n  const source = config.source ?? \"https://www.googletagmanager.com/gtm.js\";\n  script.src = `${source}?${queryString}`;\n  const parentElement = config.parentElement ?? doc.body;\n  if (typeof (parentElement == null ? void 0 : parentElement.appendChild) !== \"function\") {\n    throw new Error(\"parentElement must be a DOM element\");\n  }\n  parentElement.appendChild(script);\n  return script;\n}\nfunction hasScript(source = \"https://www.googletagmanager.com/gtm.js\") {\n  return Array.from(document.getElementsByTagName(\"script\")).some(\n    (script) => script.src.includes(source)\n  );\n}\nclass GtmSupport {\n  id;\n  options;\n  scriptElements = [];\n  constructor(options) {\n    if (Array.isArray(options.id)) {\n      for (const idOrObject of options.id) {\n        if (typeof idOrObject === \"string\") {\n          assertIsGtmId(idOrObject);\n        } else {\n          assertIsGtmId(idOrObject.id);\n        }\n      }\n    } else {\n      assertIsGtmId(options.id);\n    }\n    this.id = options.id;\n    this.options = {\n      enabled: true,\n      debug: false,\n      loadScript: true,\n      defer: false,\n      compatibility: false,\n      ...options\n    };\n    delete this.options.id;\n  }\n  isInBrowserContext = () => typeof window !== \"undefined\";\n  enabled() {\n    return this.options.enabled ?? true;\n  }\n  enable(enabled = true, source) {\n    this.options.enabled = enabled;\n    if (this.isInBrowserContext() && enabled && !hasScript(source) && this.options.loadScript) {\n      if (Array.isArray(this.id)) {\n        this.id.forEach((id) => {\n          let scriptElement;\n          if (typeof id === \"string\") {\n            scriptElement = loadScript(id, {\n              ...this.options\n            });\n          } else {\n            scriptElement = loadScript(id.id, {\n              ...this.options,\n              queryParams: id.queryParams\n            });\n          }\n          this.scriptElements.push(scriptElement);\n        });\n      } else {\n        const scriptElement = loadScript(this.id, {\n          ...this.options\n        });\n        this.scriptElements.push(scriptElement);\n      }\n    }\n  }\n  debugEnabled() {\n    return this.options.debug ?? false;\n  }\n  debug(enable) {\n    this.options.debug = enable;\n  }\n  dataLayer() {\n    if (this.isInBrowserContext() && this.options.enabled) {\n      return window.dataLayer = window.dataLayer ?? [];\n    }\n    return false;\n  }\n  trackView(screenName, path, additionalEventData = {}) {\n    const trigger = this.isInBrowserContext() && (this.options.enabled ?? false);\n    if (this.options.debug) {\n      console.log(\n        `[GTM-Support${trigger ? \"\" : \"(disabled)\"}]: Dispatching TrackView`,\n        { screenName, path }\n      );\n    }\n    if (trigger) {\n      const dataLayer = window.dataLayer = window.dataLayer ?? [];\n      dataLayer.push({\n        ...additionalEventData,\n        event: this.options.trackViewEventProperty ?? \"content-view\",\n        \"content-name\": path,\n        \"content-view-name\": screenName\n      });\n    }\n  }\n  trackEvent({\n    event,\n    category = null,\n    action = null,\n    label = null,\n    value = null,\n    noninteraction = false,\n    ...rest\n  } = {}) {\n    const trigger = this.isInBrowserContext() && (this.options.enabled ?? false);\n    if (this.options.debug) {\n      console.log(\n        `[GTM-Support${trigger ? \"\" : \"(disabled)\"}]: Dispatching event`,\n        {\n          event,\n          category,\n          action,\n          label,\n          value,\n          ...rest\n        }\n      );\n    }\n    if (trigger) {\n      const dataLayer = window.dataLayer = window.dataLayer ?? [];\n      dataLayer.push({\n        event: event ?? \"interaction\",\n        target: category,\n        action,\n        \"target-properties\": label,\n        value,\n        \"interaction-type\": noninteraction,\n        ...rest\n      });\n    }\n  }\n}\nexport {\n  GTM_ID_PATTERN,\n  GtmSupport,\n  assertIsGtmId,\n  hasScript,\n  loadScript\n};\n", "import { GtmSupport, loadScript } from \"@gtm-support/core\";\nimport { GtmSupport as GtmSupport2, GtmSupport as GtmSupport3, assertIsGtmId, hasScript, loadScript as loadScript2 } from \"@gtm-support/core\";\nimport { nextTick } from \"vue\";\nlet gtmPlugin;\nfunction install(app, options = { id: \"\" }) {\n  options = { trackOnNextTick: false, ...options };\n  gtmPlugin = new GtmSupport(options);\n  app.config.globalProperties.$gtm = gtmPlugin;\n  if (gtmPlugin.isInBrowserContext()) {\n    if (options.vueRouter) {\n      initVueRouterGuard(\n        app,\n        options.vueRouter,\n        options.ignoredViews,\n        options.trackOnNextTick,\n        options.vueRouterAdditionalEventData\n      );\n    }\n    if (gtmPlugin.options.enabled && gtmPlugin.options.loadScript) {\n      if (Array.isArray(options.id)) {\n        options.id.forEach((id) => {\n          if (typeof id === \"string\") {\n            loadScript(id, options);\n          } else {\n            const newConf = {\n              ...options\n            };\n            if (id.queryParams != null) {\n              newConf.queryParams = {\n                ...newConf.queryParams,\n                ...id.queryParams\n              };\n            }\n            loadScript(id.id, newConf);\n          }\n        });\n      } else {\n        loadScript(options.id, options);\n      }\n    }\n  }\n  app.provide(\"gtm\", options);\n}\nfunction initVueRouterGuard(app, vueRouter, ignoredViews = [], trackOnNextTick, deriveAdditionalEventData = () => ({})) {\n  function isNavigationFailure(failure, navigationFailureType) {\n    if (!(failure instanceof Error)) {\n      return false;\n    }\n    return !!(failure.type & navigationFailureType);\n  }\n  vueRouter.afterEach(async (to, from, failure) => {\n    var _a, _b, _c;\n    if (typeof to.name !== \"string\" || Array.isArray(ignoredViews) && ignoredViews.includes(to.name) || typeof ignoredViews === \"function\" && ignoredViews(to, from)) {\n      return;\n    }\n    const name = to.meta && typeof to.meta.gtm === \"string\" && !!to.meta.gtm ? to.meta.gtm : to.name;\n    if (isNavigationFailure(failure, 4)) {\n      if (gtmPlugin == null ? void 0 : gtmPlugin.debugEnabled()) {\n        console.log(\n          `[VueGtm]: '${name}' not tracked due to navigation aborted`\n        );\n      }\n    } else if (isNavigationFailure(failure, 8)) {\n      if (gtmPlugin == null ? void 0 : gtmPlugin.debugEnabled()) {\n        console.log(\n          `[VueGtm]: '${name}' not tracked due to navigation cancelled`\n        );\n      }\n    }\n    const additionalEventData = {\n      ...await deriveAdditionalEventData(to, from),\n      ...(_a = to.meta) == null ? void 0 : _a.gtmAdditionalEventData\n    };\n    const baseUrl = ((_c = (_b = vueRouter.options) == null ? void 0 : _b.history) == null ? void 0 : _c.base) ?? \"\";\n    let fullUrl = baseUrl;\n    if (!fullUrl.endsWith(\"/\")) {\n      fullUrl += \"/\";\n    }\n    fullUrl += to.fullPath.startsWith(\"/\") ? to.fullPath.substring(1) : to.fullPath;\n    if (trackOnNextTick) {\n      void nextTick(() => {\n        gtmPlugin == null ? void 0 : gtmPlugin.trackView(name, fullUrl, additionalEventData);\n      });\n    } else {\n      gtmPlugin == null ? void 0 : gtmPlugin.trackView(name, fullUrl, additionalEventData);\n    }\n  });\n}\nfunction createGtm(options) {\n  return { install: (app) => install(app, options) };\n}\nconst _default = { install };\nfunction useGtm() {\n  return gtmPlugin;\n}\nexport {\n  GtmSupport2 as GtmPlugin,\n  GtmSupport3 as GtmSupport,\n  assertIsGtmId,\n  createGtm,\n  _default as default,\n  hasScript,\n  loadScript2 as loadScript,\n  useGtm\n};\n"],
  "mappings": "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",
  "names": ["_a", "_a2", "_a"]
}

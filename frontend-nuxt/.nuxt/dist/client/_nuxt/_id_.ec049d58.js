import{u as Q,_ as W,a as X}from"./gup_posts.f706b10c.js";import{_ as Y}from"./Spinner.2bb35980.js";import{j as Z,a as D,o,b as a,f as b,w as tt,e as t,t as e,h as N,v as st,x as ot,y as et,l as nt,k as ct,z as it,A as at,s as R,m as v,B as lt,u as s,c as d,q as p,p as T,F as y,C as q,D as ut,E as rt,G as _t,H as dt}from"./entry.fb5008d9.js";import{u as pt,a as mt,b as ht}from"./imported_posts.cacf9b30.js";const vt=c=>(ot("data-v-986e25ca"),c=c(),et(),c),yt={class:"d-flex w-100 justify-content-between"},bt={class:"title mb-1"},ft={class:"text-muted"},gt={class:"mb-0"},Pt=vt(()=>t("br",null,null,-1)),wt={__name:"PostRowGup",props:["post","refresh"],setup(c){return D(),(l,u)=>{const n=st;return o(),a("div",null,[b(n,{to:{name:"publications-post-id-gup-gupid",query:l.$route.query,params:{gupid:c.post.gup_id}},class:"list-group-item list-group-item-action"},{default:tt(()=>[t("div",yt,[t("h5",bt,e(c.post.title),1),t("small",ft,"GUP-ID: "+e(c.post.gup_id),1)]),t("p",gt,e(c.post.date),1),t("small",null,[N(e(c.post.pubtype),1),Pt,N(" "+e(c.post.number_of_authors)+" författare",1)])]),_:1},8,["to"])])}}},kt=Z(wt,[["__scopeId","data-v-986e25ca"]]),It={class:"col-6"},xt={key:1},Bt={class:"row"},Gt={class:"pb-0 mb-4"},St={class:"col-auto"},$t={class:"row"},Ct={class:"col"},Nt={class:"row pb-4"},Rt={class:"col text-end"},Tt={class:"mb-4"},qt={class:"row pb-4"},Dt={class:"col"},Ft={class:"mb-1 text-muted"},Vt={key:0},Et={class:"row"},At={class:"col"},Lt={class:"row"},Ut={class:"col"},jt={class:"mb-1 text-muted"},zt={class:"col-auto"},Ht={class:"row"},Mt={class:"col"},Jt=t("label",{class:"d-none",for:"title-search"},"Sök på titel",-1),Kt={key:0},Ot={class:"col-6"},ss={__name:"[id]",async setup(c){let l,u;const{t:n}=D(),f=nt(),F=ct(),_=it(null),{$toast:V}=at();pt();const g=mt(),{fetchImportedPostById:E,removeImportedPost:A,fetchImportedPosts:L}=g,{importedPostById:i,pendingImportedPostById:m,errorImportedPostById:P}=R(g),w=Q(),{fetchGupPostsByTitle:k,fetchGupPostsById:U}=w,{gupPostsByTitle:I,pendingGupPostsByTitle:h,gupPostsById:x,pendingGupPostsById:B,gupPostById:Qt,pendingGupPostById:Wt}=R(w);[l,u]=v(()=>E(f.params.id)),await l,u(),_.value=i.value?i.value.title:"",i.value&&([l,u]=v(()=>U(i.value.id)),await l,u(),[l,u]=v(()=>k(i.value.id,i.value.title)),await l,u());const j=ht(()=>{i&&k({title:_.value})},500);lt(_,()=>{j()});function z(){alert("merge")}async function H(){confirm(n("messages.confirm_remove"))&&(await A(i.value.id),L(),V.success(n("messages.remove_success")),F.push({path:"/publications",query:{...f.query}}))}function M(){alert("Edit in GUP")}return(G,S)=>{const J=W,$=Y,K=X,C=kt,O=dt;return o(),a(y,null,[t("div",It,[s(P)?(o(),d(J,{key:0,error:s(P)},null,8,["error"])):(o(),a("div",xt,[t("div",Bt,[t("div",{class:p(["col",{"opacity-50":s(m)}])},[t("h2",Gt,e(s(i).title),1)],2),t("div",St,[s(h)||s(B)||s(m)?(o(),d($,{key:0,class:"me-4"})):T("",!0)])]),t("div",$t,[t("div",Ct,[b(K,{class:p({"opacity-50":s(m)}),post:s(i)},null,8,["class","post"])])]),t("div",Nt,[t("div",Rt,[t("button",{type:"button",class:"btn btn-danger me-1",onClick:H},e(s(n)("buttons.remove")),1),t("button",{type:"button",class:"btn btn-secondary me-1",onClick:M},e(s(n)("buttons.edit")),1),t("button",{type:"button",class:"btn btn-success",onClick:z},e(s(n)("buttons.merge")),1)])]),t("h3",Tt,e(s(n)("views.publications.post.result_list.header")),1),t("div",qt,[t("div",Dt,[t("h4",Ft,e(s(n)("views.publications.post.result_list_by_id.header")),1),s(x).length?(o(),a("div",{key:1,class:p([{"opacity-50":s(B)},"list-group list-group-flush border-bottom"])},[(o(!0),a(y,null,q(s(x),r=>(o(),d(C,{post:r,refresh:G.$route.query,key:r.id},null,8,["post","refresh"]))),128))],2)):(o(),a("div",Vt,e(s(n)("views.publications.post.result_list.no_gup_posts_by_id_found")),1))])]),t("div",Et,[t("div",At,[t("div",Lt,[t("div",Ut,[t("h4",jt,e(s(n)("views.publications.post.result_list_by_title.header")),1)]),t("div",zt,[s(h)?(o(),d($,{key:0,class:"me-4"})):T("",!0)])]),t("div",Ht,[t("div",Mt,[Jt,ut(t("input",{id:"title-search",class:"form-control mb-3",type:"search","onUpdate:modelValue":S[0]||(S[0]=r=>_t(_)?_.value=r:null)},null,512),[[rt,s(_)]]),s(I).length?(o(),a("div",{key:1,class:p([{"opacity-50":s(h)},"list-group list-group-flush border-bottom"])},[(o(!0),a(y,null,q(s(I),r=>(o(),d(C,{post:r,key:r.id},null,8,["post"]))),128))],2)):(o(),a("div",Kt,e(s(n)("views.publications.post.result_list.no_gup_posts_by_title_found")),1))])])])])]))]),t("div",Ot,[b(O)])],64)}}};export{ss as default};
